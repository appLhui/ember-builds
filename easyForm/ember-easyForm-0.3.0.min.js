// ==========================================================================
// Project:   Ember EasyForm
// Copyright: Â©2013 DockYar, LLC. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================


// Last commit: 16f3486 (2013-03-04 21:19:48 -0500)


(function(){Ember.EasyForm=Ember.Namespace.create({VERSION:"0.3.0"})})(),function(){Ember.Handlebars.registerHelper("errorField",function(e,t){if(this.get("errors"))return t.hash.property=e,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Error,t)})}(),function(){Ember.Handlebars.registerBoundHelper("formFor",function(e,t){return Ember.Handlebars.helpers.view.call(e,Ember.EasyForm.Form,t)})}(),function(){Ember.Handlebars.registerHelper("input",function(e,t){return t.hash.inputOptions=Ember.copy(t.hash),t.hash.property=e,t.hash.isBlock=!!t.fn,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Input,t)})}(),function(){Ember.Handlebars.registerHelper("inputField",function(e,t){var n=this,r=function(e){try{return n.constructor.metaForProperty(e)}catch(t){return null}};t.hash.valueBinding=e;if(t.hash.as==="text")return Ember.Handlebars.helpers.view.call(n,Ember.TextArea,t);if(!t.hash.type)if(e.match(/password/))t.hash.type="password";else if(e.match(/email/))t.hash.type="email";else if(r(n,e)==="number"||typeof n.get(e)=="number")t.hash.type="number";else if(r(n,e)==="date"||n.get(e)!==undefined&&n.get(e).constructor===Date)t.hash.type="date";return Ember.Handlebars.helpers.view.call(n,Ember.TextField,t)})}(),function(){Ember.Handlebars.registerHelper("labelField",function(e,t){return t.hash.property=e,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Label,t)})}(),function(){Ember.Handlebars.registerHelper("submit",function(e,t){return typeof e=="object"&&(t=e,e=undefined),t.hash.context=this,t.hash.value=e||"Submit",Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Submit,t)})}(),function(){}(),function(){Ember.EasyForm.Error=Ember.View.extend({tagName:"span",classNames:["error"],init:function(){var e;this._super(),e={},e[""+this.property+"Watch"]=function(){return typeof this.get("controller.errors."+this.property)=="string"?this.get("controller.errors."+this.property):(this.get("controller.errors."+this.property)||[])[0]}.property("controller.content.errors."+this.property),this.reopen(e),this.set("template",Ember.Handlebars.compile("{{view."+this.property+"Watch}}"))}})}(),function(){Ember.EasyForm.Form=Ember.View.extend({tagName:"form",attributeBindings:["novalidate"],novalidate:"novalidate",submit:function(e){var t=this.get("context").get("content"),n=this;e&&e.preventDefault(),t.validate===undefined?this.get("controller").send("submit"):t.validate().then(function(){t.get("isValid")===!0&&n.get("controller").send("submit")})}})}(),function(){Ember.EasyForm.Input=Ember.View.extend({init:function(){this._super(),this.isBlock||this.set("template",Ember.Handlebars.compile(this.fieldsForInput())),this.get("context").get("errors")!==undefined&&this.reopen({error:function(){return this.get("context").get("errors").get(this.property)!==undefined}.property("context.errors."+this.property)})},tagName:"div",classNames:["input","string"],classNameBindings:["error:fieldWithErrors"],fieldsForInput:function(){return this.labelField()+this.inputField()+this.errorField()},labelField:function(){var e=this.label?'text="'+this.label+'"':"";return"{{labelField "+this.property+" "+e+"}}"},inputField:function(){var e="",t,n=["type","placeholder"];for(var r=0;r<n.length;r++)t=n[r],this[t]&&(typeof this[t]=="boolean"&&(this[t]=t),e=e.concat(""+t+'="'+this[n[r]]+'"'));return e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),"{{inputField "+this.property+" "+e+"}}"},errorField:function(){var e="";return"{{errorField "+this.property+" "+e+"}}"},focusOut:function(){this.get("context").get("content").validate&&this.get("context").get("content").validate(this.property)}})}(),function(){Ember.EasyForm.Label=Ember.View.extend({tagName:"label",init:function(){this.set("template",this.renderText())},renderText:function(){return Ember.Handlebars.compile(this.text||this.property.underscore().split("_").join(" ").capitalize())}})}(),function(){Ember.EasyForm.Submit=Ember.View.extend({tagName:"input",attributeBindings:["type","value"],type:"submit",init:function(){this.set("value",this.value)},onClick:function(){this.get("context").validate()&&this.get("controller").send("submit")}})}(),function(){}(),function(){Ember.TEMPLATES["easyForm/input"]=Ember.Handlebars.compile('<label {{bindAttr for="labelFor"}}>{{labelText}}</label>')}(),function(){}(),function(){Ember.EasyForm.objectNameFor=function(e){var t=e.constructor.toString().split(".");return t[t.length-1].underscore()}}(),function(){}(),typeof location!="undefined"&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")&&console.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");