// ==========================================================================
// Project:   Ember EasyForm
// Copyright: Â©2013 DockYar, LLC. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================


// Last commit: a87ddc0 (2013-02-26 23:44:56 -0500)


(function(){Ember.EasyForm=Ember.Namespace.create({VERSION:"0.1.1"})})(),function(){Ember.Handlebars.registerHelper("error",function(e,t){if(this.get("errors"))return t.hash.property=e,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Error,t)})}(),function(){Ember.Handlebars.registerBoundHelper("formFor",function(e,t){return Ember.Handlebars.helpers.view.call(e,Ember.EasyForm.Form,t)})}(),function(){Ember.Handlebars.registerHelper("input",function(e,t){return t.hash.inputOptions=Ember.copy(t.hash),t.hash.property=e,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Input,t)})}(),function(){Ember.Handlebars.registerHelper("submit",function(e,t){return typeof e=="object"&&(t=e,e=undefined),t.hash.context=this,t.hash.value=e||"Submit",Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Submit,t)})}(),function(){Ember.Handlebars.registerHelper("textArea",function(e,t){return t.hash.valueBinding=e,Ember.Handlebars.helpers.view.call(this,Ember.TextArea,t)})}(),function(){Ember.Handlebars.registerHelper("textField",function(e,t){return t.hash.valueBinding=e,Ember.Handlebars.helpers.view.call(this,Ember.TextField,t)})}(),function(){}(),function(){Ember.EasyForm.Error=Ember.View.extend({tagName:"span",classNames:["error"],init:function(){this._super(),this.set("template",Ember.Handlebars.compile("{{errors."+this.property+"}}"))}})}(),function(){Ember.EasyForm.Form=Ember.View.extend({tagName:"form",attributeBindings:["novalidate"],novalidate:"novalidate",submit:function(e){var t=this.get("context").get("content");(t.validate===undefined||t.validate())&&this.get("controller").send("submit"),e&&e.preventDefault()}})}(),function(){Ember.EasyForm.Input=Ember.View.extend({init:function(){this._super(),this.set("template",Ember.Handlebars.compile('<label for="'+this.labelFor()+'"}}>'+this.labelText()+"</label>\n{{"+this.inputHelper()+" "+this.property+this.printInputOptions()+"}}{{error "+this.property+"}}")),this.get("context").get("errors")!==undefined&&this.reopen({error:function(){return this.get("context").get("errors").get(this.property)!==undefined}.property("context.errors."+this.property)})},tagName:"div",classNames:["input","string"],classNameBindings:["error:field_with_errors"],labelFor:function(){return Ember.guidFor(this.get("context").get(this.property))},labelText:function(){return this.label||this.property.underscore().split("_").join(" ").capitalize()},inputHelper:function(){return this.as==="text"?"textArea":"textField"},printInputOptions:function(){var e="",t,n;n=this.prepareInputOptions(this.inputOptions);if(n){for(t in n)e=e.concat(""+t+'="'+this.inputOptions[t]+'"');return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")," "+e}},prepareInputOptions:function(e){var t=this.get("context").get("content");if(!e.type)if(this.property.match(/password/))e.type="password";else if(this.property.match(/email/))e.type="email";else if(this.propertyType(t,this.property)==="number"||typeof t.get(this.property)=="number")e.type="number";else if(this.propertyType(t,this.property)==="date"||t.get(this.property)!==undefined&&t.get(this.property).constructor===Date)e.type="date";return e},focusOut:function(){this.get("context").get("content").validate&&this.get("context").get("content").validate(this.property)},propertyType:function(e,t){try{return e.constructor.metaForProperty(t)}catch(n){return null}}})}(),function(){Ember.EasyForm.Submit=Ember.View.extend({tagName:"input",attributeBindings:["type","value"],type:"submit",init:function(){this.set("value",this.value)},onClick:function(){this.get("context").validate()&&this.get("controller").send("submit")}})}(),function(){}(),function(){Ember.TEMPLATES["easyForm/input"]=Ember.Handlebars.compile('<label {{bindAttr for="labelFor"}}>{{labelText}}</label>')}(),function(){}(),function(){Ember.EasyForm.objectNameFor=function(e){var t=e.constructor.toString().split(".");return t[t.length-1].underscore()}}(),function(){}(),typeof location!="undefined"&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")&&console.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");